@{
    ViewBag.Title = "Navigation";
}

<div class="row">
    <div class="col-lg-12">
        <form id="searchContainer" action="#" method="post" class="form-horizontal form-validate" role="form">
            <section class="panel">
                <header class="panel-heading">Find Offices</header>
                <div class="panel-body">
                    <div class="form-group">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="col-lg-4">
                                    <label class="control-label">Building</label>
                                </div>
                                <div class="col-lg-8">
                                    <select class="form-control m-bot15" data-bind="options: searchModel.buildings, optionsValue: 'id', optionsText: 'name', value: searchModel.selectedBuildingId, optionsCaption: 'Select a Building...'"></select>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="col-lg-4">
                                    <label class="control-label">Floor</label>
                                </div>
                                <div class="col-lg-8">
                                    <select class="form-control m-bot15" data-bind="options: searchModel.floors, optionsValue: 'id', optionsText: 'description', value: searchModel.selectedFloorId, optionsCaption: 'Select a Floor...'"></select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </form>
    </div>
</div>
<div class="row">
    <div class="col-lg-12" data-bind="with: officeMap">
        <form id="officeForm" action="#" method="post" class="form-horizontal form-validate" role="form">
            <section class="panel col-lg-4"">
                <header class="panel-heading">Office</header>
                <div class="panel-body" data-bind="visible: $parent.searchModel.selectedFloorId() > 0">
                    <input type="hidden" data-bind="value: selected.id" />
                    <input type="hidden" data-bind="value: selected.floorMapId" />
                    <input type="hidden" data-bind="value: selected.latitude" />
                    <input type="hidden" data-bind="value: selected.longitude" />
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Name</label>
                        <div class="col-sm-10">
                            <input class="form-control" id="DisplayName" name="DisplayName" type="text" data-bind="value: selected.displayName, css: { error: typeof (errors.displayName()) !== 'undefined' }" data-val="true" data-val-required="'Name' should not be empty."  aria-required="true" aria-describedby="Name-error">
                            <label data-valmsg-replace="true" data-valmsg-for="DisplayName" data-bind="text: errors.displayName" class="error"></label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Number</label>
                        <div class="col-sm-10">
                            <input id="OfficeNumber" name="OfficeNumber" type="text" data-bind="value: selected.officeNumber, css: { error: typeof (errors.officeNumber()) !== 'undefined' }" class="form-control">
                            <label data-valmsg-replace="true" data-valmsg-for="OfficeNumber" data-bind="text: errors.officeNumber" class="error"></label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Type</label>
                        <div class="col-sm-10">
                            <select id="OfficeType" name="OfficeType" class="form-control m-bot15" data-bind="options: $parent.officeTypes, optionsValue: 'id', optionsText: 'description', value: selected.officeType, css: { error: typeof (errors.officeType()) !== 'undefined' }"></select>
                            <label data-valmsg-replace="true" data-valmsg-for="OfficeType" data-bind="text: errors.officeType" class="error"></label>
                        </div>
                    </div>
                    <div class="form-group" data-bind="visible: selected.id() > 0">
                        <div class="col-lg-offset-2 col-lg-10">
                            <button type="submit" class="btn btn-primary" data-bind="click: officeSave, enable: selected.id() > 0">Save</button>
                        </div>
                    </div>
                    <div class="form-group" data-bind="visible: selected.id() == 0">
                        <div class="col-lg-offset-2 col-lg-10">
                            <button type="submit" class="btn btn-primary" data-bind="click: officeCreate, enable: selected.id() == 0">Create</button>
                        </div>
                    </div>
                </div>
            </section>
            <section class="panel col-lg-8">
                <header class="panel-heading">Map</header>
                <div class="panel-body">
                    <div id="map" style="height:400px"></div>
                </div>
            </section>
        </form>
    </div>

</div>

@section scripts 
{
    <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true&libraries=places"></script>
    @Scripts.Render("~/bundles/jqueryval")
    <script type="text/javascript" src="~/Scripts/wayfinding/models.js"></script>
    <script type="text/javascript" src="~/Scripts/wayfinding/navigation.js"></script>
}

@section dialogs
{
}

